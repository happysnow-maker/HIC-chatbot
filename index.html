import React, { useState, useRef, useEffect } from "react";
import { Search, Send, Sparkles, ChevronRight, ChevronDown } from "lucide-react";

// =============================
// Brand palette (primary navy)
// =============================
const BRAND = "#2e3d86";           // primary
const BRAND_HOVER = "#273575";     // hover
const BRAND_RING = "#2e3d86";      // focus ring & borders

// =============================
// Assets & Safe <img>
// =============================
const LOGO_SOURCES = [
  "/assets/hic-logo.svg",
  "/assets/hic-logo.png",
  "/mnt/data/hic-logo.svg.png", // chat sandbox fallback
];
const ICON_SOURCES = [
  "/assets/hic-icon.png",
  "/assets/hic-icon.svg",
  "/mnt/data/hic-icon.png.png", // chat sandbox fallback
];

const SafeImg = ({ sources, alt, className }) => {
  const [idx, setIdx] = useState(0);
  const src = sources[Math.min(idx, sources.length - 1)];
  return (
    <img
      src={src}
      alt={alt}
      className={className}
      onError={() => setIdx((v) => Math.min(v + 1, sources.length - 1))}
    />
  );
};

// =============================
// Data (module-scoped so tests can access)
// =============================
const categories = {
  "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ë¹„ì „ ë° êµìœ¡ ì² í•™": { icon: "ğŸ’¡", ids: [1, 2, 3, 4, 5, 6, 7, 8, 9] },
  "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ êµìœ¡ì²´ê³„ ë° ì¡¸ì—…ìš”ê±´": { icon: "ğŸ“", ids: [10, 11, 12, 13, 14, 15, 16] },
  "1í•™ë…„ ìˆ˜ê°•ì‹ ì²­(ì‹œê°„í‘œ)": { icon: "ğŸ“…", ids: [17, 18, 19, 20, 21, 22] },
  "ì£¼ì „ê³µ ì§„ì…": { icon: "ğŸ¯", ids: [23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45] },
  "2~4í•™ë…„ ìœµí•©íŠ¹í™”ì „ê³µ í”„ë¡œê·¸ë¨": { icon: "ğŸš€", ids: [46, 47, 48, 49, 50, 51, 52, 53] },
  "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ í”„ë¡œì íŠ¸ ë° ì¥í•™ê¸ˆ": { icon: "ğŸ’°", ids: [54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64] },
  "ì˜ˆë¹„ ì‹ ì…ìƒ Bootcamp & SPARK": { icon: "âš¡", ids: [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75] },
};

const faqData = {
  1: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ 1í•™ë…„ ìœµí•©ê¸°ì´ˆêµìœ¡ì€ 100% ì˜ì–´ë¡œ ì§„í–‰ë˜ë‚˜ìš”?", a: "ë„¤, 1í•™ë…„ ìœµí•©ê¸°ì´ˆêµìœ¡ì€ ì „ ê³¼ëª© 100% ì˜ì–´ ìˆ˜ì—…ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤." },
  2: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ì˜ êµìœ¡ ìš´ì˜ ë°©ì‹ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?", a: "ê¸°ì¡´ì˜ ê°•ì˜ ì¤‘ì‹¬ ìˆ˜ì—…ì„ íƒˆí”¼í•œ ì•¡ì…˜ëŸ¬ë‹ ê¸°ë°˜ì˜ ë¹„íŒì  ì§ˆë¬¸ê³¼ í˜‘ë ¥í•™ìŠµ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„ë˜ì–´ ìš´ì˜ë©ë‹ˆë‹¤." },
  3: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ìœµí•©ê¸°ì´ˆêµìœ¡ì˜ ëª©ì ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ê¸€ë¡œë²Œ ì‚¬íšŒë³€í™”ë¥¼ ì´ëŒì–´ë‚¼ ìˆ˜ ìˆëŠ” í˜ì‹ ì  ì‚¬ê³  ì œì•ˆ ë° ì°½ì˜ ì—­ëŸ‰ ê°œë°œê³¼ êµ­ì œí™” ì‹œëŒ€ì— ë§ì¶˜ í•™ìƒë“¤ì˜ ì˜ì–´ ì—­ëŸ‰ ê°•í™”ê°€ ëª©ì ì…ë‹ˆë‹¤." },
  4: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ì˜ ë¹„ì „ì´ ê¶ê¸ˆí•©ë‹ˆë‹¤.", a: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ì˜ ë¹„ì „ì€ \"Change the World with Interdisciplinary Intelligence\"ì…ë‹ˆë‹¤." },
  5: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ì—ì„œ ì¶”êµ¬í•˜ëŠ” ì¸ì¬ìƒì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ê²½ê³„ë¥¼ ì´ˆì›”í•œ í˜„ìƒí•™ì  ê²½í—˜ìœ¼ë¡œ ì„¸ìƒì„ ë°”ê¾¸ëŠ” ê¸€ë¡œë²Œ íƒí—˜ê°€ì´ë©°, \"Get out of your comfort zone to embrace the unknown\"ì…ë‹ˆë‹¤." },
  6: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ì˜ í•µì‹¬ ìœµí•© ì—­ëŸ‰ìœ¼ë¡œëŠ” ì–´ë–¤ ê²ƒë“¤ì´ ìˆë‚˜ìš”?", a: "Changemaker, Foundation Builder, Scientific Thinker, Data Decision Maker, Creative Communicatorê°€ ìˆìŠµë‹ˆë‹¤." },
  7: { q: "Foundation Builderê°€ ì´í•´í•´ì•¼ í•˜ëŠ” ê¸°ì´ˆëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "ì§€ì‹ ê°„ì˜ ë‹¨ìˆœí•œ ìœµí•©ì´ ì•„ë‹Œ Human/Non-Human factorsì˜ ìœµí•©ì„ ì´í•´í•˜ëŠ” ê³¼í•™ì² í•™ ê¸°ì´ˆì…ë‹ˆë‹¤." },
  8: { q: "Scientific Thinkerê°€ í™•ë¦½í•´ì•¼ í•˜ëŠ” ê²ƒì´ ë¬´ì—‡ì¸ê°€ìš”?", a: "ê¸€ë¡œë²Œ í˜„ìƒì— ëŒ€í•œ ì‹œìŠ¤í…œ ê³¼í•™ì  ì‚¬ê³ ì²´ê³„ í™•ë¦½ì…ë‹ˆë‹¤." },
  9: { q: "Creative Communicatorê°€ ê°–ì¶°ì•¼ í•  ê¸°ìˆ ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì°½ì˜ì /í˜ì‹ ì  ì‚¬ê³ ê³¼ì •ì„ í†µí•´ ìê¸° ìƒê°ì„ í‘œí˜„í•˜ì—¬ ë‹¤ì–‘í•œ ê´€ì ì„ ì¡°ìœ¨í•˜ëŠ” ë…¼ë¦¬ì  ì„¤ë“ ê¸°ìˆ ì…ë‹ˆë‹¤." },
  10: { q: "1í•™ë…„ ê³µí†µ êµìœ¡ê³¼ì •ì—ëŠ” ì–´ë–¤ ê³¼ëª©ë“¤ì´ ê°œì„¤ë˜ì–´ ìˆë‚˜ìš”?", a: "Systems Thinking and Design Thinking (3í•™ì ), Algorithmic, Computational and Data Thinking (3í•™ì ), Mathematical Thinking (3í•™ì ), Unified Systems Science (4í•™ì ), Global Critical Anthropology (2í•™ì ), Life Project (3í•™ì ) ì´ 6ê°œì…ë‹ˆë‹¤." },
  11: { q: "1í•™ë…„ ê³µí†µ êµìœ¡ê³¼ì •ì€ ì´ ëª‡ í•™ì ìœ¼ë¡œ êµ¬ì„±ë˜ë‚˜ìš”?", a: "ë§¤ í•™ê¸° ì´ 18í•™ì , 1í•™ë…„ ê³µí†µ êµìœ¡ê³¼ì •ì€ ì´ 36í•™ì ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤." },
  12: { q: "1í•™ë…„ êµìœ¡ê³¼ì •ì´ ì—°ë‹¨ìœ„ë¡œ ìš´ì˜ëœë‹¤ëŠ” ê²ƒì€ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ë‚˜ìš”?", a: "ì´ 6ê°œ êµê³¼ëª©ì´ 1í•™ê¸° ë° 2í•™ê¸°ì— ê±¸ì³ 1ë…„ ê³¼ì •ìœ¼ë¡œ í•™ìŠµí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤." },
  13: { q: "ì—°ë‹¨ìœ„ êµìœ¡ê³¼ì •ì˜ ìµœì¢… ì„±ì ì€ ì–¸ì œ ê²°ì •ë˜ë‚˜ìš”?", a: "1í•™ê¸° ë° 2í•™ê¸° ì„±ê³¼ë¥¼ ì¢…í•©í•˜ì—¬ 1í•™ë…„ 2í•™ê¸°ì— ìµœì¢… ì„±ì ì´ ì‚°ì¶œë©ë‹ˆë‹¤." },
  14: { q: "ì—°ë‹¨ìœ„ êµìœ¡ê³¼ì •ì—ì„œ 1í•™ê¸° ì„±ì ì€ ì–´ë–»ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‚˜ìš”?", a: "1í•™ê¸° ì„±ì ì€ 'ì¥í•™ê¸ˆ ì‚°ì •'ì„ ìœ„í•´ ì‚°ì¶œë˜ë©°, ê°œë³„ ì„±ì ì€ 'ì„±ì  ì—´ëŒ ë° ì´ì˜ì‹ ì²­/ì •ì •' ê¸°ê°„ì—ë§Œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  15: { q: "1í•™ê¸° ì„±ì  ì—´ëŒ ê¸°ê°„ ì´í›„ì—ëŠ” ì–´ë–¤ ì„±ì ë§Œ í™•ì¸í•  ìˆ˜ ìˆë‚˜ìš”?", a: "í•™ê¸°ë³„ ì¢…í•© ì¥í•™í‰ì ë§Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  16: { q: "ê³µì‹ ì„±ì ì¦ëª…ì„œì—ëŠ” 1í•™ê¸° ëˆ„ì í‰ì í‰ê· ì´ ì–´ë–»ê²Œ í‘œê¸°ë˜ë‚˜ìš”?", a: "0ì (ê³µì‹ ì„±ì ì¦ëª…ì„œì—ëŠ” 'I(Incomplete)'ë¡œ í‘œê¸°)ìœ¼ë¡œ ë³´ì´ê²Œ ë©ë‹ˆë‹¤." },
  17: { q: "1í•™ë…„ ê³µí†µ êµìœ¡ê³¼ì •ì— ë°°ì •ëœ 18í•™ì ì˜ ìˆ˜ê°•ì‹ ì²­ì€ ì–´ë–»ê²Œ ì§„í–‰ë˜ë‚˜ìš”?", a: "ë§¤ í•™ê¸° ìˆ˜ê°•ì‹ ì²­ ì „ì— í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ í–‰ì •íŒ€ì—ì„œ ì¼ê´„ ìˆ˜ê°•ì‹ ì²­ ì…ë ¥ì„ ì§„í–‰í•©ë‹ˆë‹¤." },
  18: { q: "ë§¤ í•™ê¸° ìˆ˜ê°• ê°€ëŠ¥í•œ 20í•™ì  ì¤‘ ê³µí†µêµìœ¡ê³¼ì •ì„ ì œì™¸í•œ 2í•™ì ì€ ì–´ë–»ê²Œ ìˆ˜ê°•ì‹ ì²­í•˜ë‚˜ìš”?", a: "2í•™ì  í•œë„ ë‚´ì—ì„œ í•™ìƒì´ ì§ì ‘ ìˆ˜ê°•ì‹ ì²­ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  19: { q: "2026í•™ë…„ë„ 1í•™ê¸° 1í•™ë…„ ìˆ˜ê°•ì‹ ì²­ì¼ìê°€ ì–¸ì œì¸ê°€ìš”?", a: "2026ë…„ 2ì›” 27ì¼(ê¸ˆ) 10:00ì…ë‹ˆë‹¤." },
  20: { q: "1í•™ë…„ 1í•™ê¸° ì‹œê°„í‘œëŠ” ì–¸ì œ í™•ì¸í•  ìˆ˜ ìˆë‚˜ìš”?", a: "2026ë…„ 2ì›” 9ì¼(ì›”)~13ì¼(ê¸ˆ) Bootcamp ê¸°ê°„ì— ì•ˆë‚´ í›„ í™ˆí˜ì´ì§€ì— ê²Œì‹œë©ë‹ˆë‹¤." },
  21: { q: "1í•™ë…„ ë•Œ í¬ë§ í•™ê³¼ì˜ ì „ê³µê³¼ëª©ì„ ë¯¸ë¦¬ ìˆ˜ê°•í•˜ë©´ ì£¼ì „ê³µ í•™ì ìœ¼ë¡œ ì¸ì •ë˜ë‚˜ìš”?", a: "ì£¼ì „ê³µ í•™ì ìœ¼ë¡œ ì¸ì •ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì£¼ì „ê³µ í™•ì • í›„ ìˆ˜ê°•í•´ì•¼ ì¸ì •ë©ë‹ˆë‹¤." },
  22: { q: "1í•™ë…„ ë•Œ íƒ€ í•™ë¶€ì˜ ì „ê³µê¸°ì´ˆí•„ìˆ˜ê³¼ëª©ì„ ì´ìˆ˜í•˜ëŠ” ê²½ìš° í•™ì  ì¸ì •ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?", a: "ì£¼ì „ê³µí•™ì ìœ¼ë¡œëŠ” ì¸ì •ë˜ì§€ ì•Šê³  ì „ì²´ ì¡¸ì—…í•™ì ìœ¼ë¡œë§Œ ì¸ì •ë©ë‹ˆë‹¤." },
  23: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ì˜ ììœ ë¡œìš´ ì£¼ì „ê³µ ì„ íƒì œë„ê°€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì…í•™ í›„ ì„±ì ì´ë‚˜ ê²½ìŸë¥  ìƒê´€ì—†ì´ ìì‹ ì´ ì›í•˜ëŠ” í•™ë¶€ë¥¼ ì„ íƒí•  ìˆ˜ ìˆëŠ” ì œë„ì…ë‹ˆë‹¤." },
  24: { q: "ì£¼ì „ê³µ ì„ íƒ ì‹œ ì¸ì› ì œí•œì´ ìˆë‚˜ìš”?", a: "ë³„ë„ì˜ ì¸ì› ì œí•œ ì—†ì´ ì‹ ì²­ ìê²© ì¶©ì¡± ì‹œ ì „ì› ì„ ë°œë©ë‹ˆë‹¤." },
  25: { q: "ì£¼ì „ê³µ ì‹ ì²­ ìê²© ì‹¬ì˜ ë° ë°°ì •ì€ ì–¸ì œ ì´ë£¨ì–´ì§€ë‚˜ìš”?", a: "2026í•™ë²ˆì˜ ê²½ìš° 2027ë…„ 1ì›”ì— ì§„í–‰ë©ë‹ˆë‹¤." },
  26: { q: "ì£¼ì „ê³µ ì‹ ì²­ ìê²©ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?", a: "ì§ì „í•™ê¸° ì„±ì ì´ ìˆëŠ” ìƒí™©ì—ì„œ ì£¼ì „ê³µ ì‹ ì²­ í•™ê¸°ì— ì¬í•™ ì¤‘ì´ë©´ ì‹ ì²­ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  27: { q: "ì£¼ì „ê³µ ë°°ì •ì´ í™•ì •ë˜ê¸° ìœ„í•œ ìµœì¢… ìê²© ìš”ê±´ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "1í•™ë…„ êµì–‘í•„ìˆ˜ êµìœ¡ê³¼ì • ëª¨ë‘ ì´ìˆ˜, ëˆ„ì í‰ì  2.0 ì´ìƒì´ì–´ì•¼ í™•ì •ë©ë‹ˆë‹¤." },
  28: { q: "1í•™ë…„ ê³µí†µ êµìœ¡ê³¼ì •ì—ì„œ Fë¥¼ ë°›ìœ¼ë©´ ì£¼ì „ê³µ ë°°ì •ì´ ë¶ˆê°€ëŠ¥í•œê°€ìš”?", a: "2026í•™ë…„ë„ ì‹ ì…ìƒë¶€í„°ëŠ” F 1ê³¼ëª©ì´ë¼ë„ ì£¼ì „ê³µ ë°°ì •ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤." },
  29: { q: "ì£¼ì „ê³µ ë°°ì •ì„ ìœ„í•´ 1í•™ë…„ ê³µí†µ êµìœ¡ê³¼ì •ì—ì„œ ë°›ì•„ì•¼ í•  ìµœì†Œ í•™ì  ê¸°ì¤€ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ëª¨ë“  êµê³¼ëª©ì—ì„œ D0 ì´ìƒ, ëˆ„ì í‰ì  2.0 ì´ìƒì´ì–´ì•¼ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  30: { q: "ì£¼ì „ê³µì€ ì´ ëª‡ ë²ˆê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆë‚˜ìš”?", a: "ì¬í•™ ì¤‘ ì´ 2íšŒ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  31: { q: "ìµœì´ˆ ì£¼ì „ê³µ ì„ íƒì€ ì–¸ì œ ì´ë£¨ì–´ì§€ë‚˜ìš”?", a: "ì…í•™ í›„ 2í•™ê¸° ë§ (10ì›” ë§~12ì›” ì‚¬ì´)ì— 1ì°¨ ìµœì´ˆ ì„ íƒì…ë‹ˆë‹¤." },
  32: { q: "ì£¼ì „ê³µ ë³€ê²½ì€ ëª‡ ì°¨ë¡€ ê°€ëŠ¥í•œê°€ìš”?", a: "ìµœì´ˆ ë°°ì • ì´í›„ ì¡¸ì—… ì „ê¹Œì§€ í•œ ë²ˆ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  33: { q: "ì£¼ì „ê³µ ë³€ê²½ ì‹œ ì´ì „ì— ì´ìˆ˜í•œ í•™ì ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?", a: "ìƒˆë¡œìš´ ì£¼ì „ê³µì˜ êµìœ¡ê³¼ì •ì— ë”°ë¼ ì „ê³µí•™ì  ë˜ëŠ” ì¼ë°˜ ì„ íƒí•™ì ìœ¼ë¡œ ì¸ì •ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  34: { q: "ì „ê³µì„ ì„ íƒí•˜ì§€ ì•Šì€ ìƒí™©ì—ì„œ 2í•™ë…„ ì§„ê¸‰ì´ ê°€ëŠ¥í•œê°€ìš”?", a: "ë„¤, ì§„ê¸‰ ì¡°ê±´ë§Œ ì¶©ì¡±í•˜ë©´ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  35: { q: "ë°ì´í„°ì‚¬ì´ì–¸ìŠ¤í•™ë¶€ì˜ ê²½ìš° 2í•™ë…„ ì§„ê¸‰ ì‹œ ì„¸ë¶€ ì „ê³µì´ ì •í•´ì§€ë‚˜ìš”?", a: "2í•™ë…„ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒ í›„ 3í•™ë…„ ì§„ê¸‰ ì‹œ ì„¸ë¶€ ì „ê³µì´ ê²°ì •ë©ë‹ˆë‹¤." },
  36: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ í•™ìƒì´ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒ ê°€ëŠ¥í•œ ë‹¨ê³¼ëŒ€í•™ì€ ì–´ë””ì¸ê°€ìš”?", a: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€, ê²½ì˜ëŒ€, ê²½ì œê¸ˆìœµëŒ€, ê³µê³¼ëŒ€(ë°˜ë„ì²´ê³µí•™ê³¼ ì œì™¸), êµ­ì œëŒ€, ìƒí™œê³¼í•™ëŒ€, ì‚¬íšŒê³¼í•™ëŒ€, ìì—°ê³¼í•™ëŒ€, ì •ì±…ê³¼í•™ëŒ€, ì‚°ì—…ìœµí•©í•™ë¶€, ì¸ë¬¸ê³¼í•™ëŒ€ ë‚´ í•™ë¶€ë¥¼ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  37: { q: "ì£¼ì „ê³µ ì„ íƒì´ ë¶ˆê°€ëŠ¥í•œ í•™ê³¼ëŠ” ì–´ë””ì¸ê°€ìš”?", a: "ì˜ê³¼ëŒ€, ê°„í˜¸í•™ê³¼, ì‚¬ë²”ëŒ€, ìŒì•…ëŒ€, ì˜ˆìˆ Â·ì²´ìœ¡ëŒ€, ê³µê³¼ëŒ€ ë°˜ë„ì²´ê³µí•™ê³¼ëŠ” ì„ íƒ ë¶ˆê°€í•©ë‹ˆë‹¤." },
  38: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€í•™ë¶€ ì¡¸ì—…í•™ì ì€ ëª‡ í•™ì ì¸ê°€ìš”?", a: "ì£¼ì „ê³µ ì¢…ë¥˜ì™€ ìƒê´€ì—†ì´ 140í•™ì ì…ë‹ˆë‹¤." },
  39: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ í•™ìƒì´ ë°˜ë“œì‹œ ì´ìˆ˜í•´ì•¼ í•˜ëŠ” ë‹¤ì „ê³µ ì˜ë¬´ê°€ ìˆë‚˜ìš”?", a: "ë„¤. ë°˜ë“œì‹œ ë¶€ì „ê³µ ì´ìƒì„ 1ê°œ ì´ìƒ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  40: { q: "íƒ€ ë‹¨ê³¼ëŒ€í•™ì„ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒí•´ë„ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ 1í•™ë…„ êµì–‘í•„ìˆ˜ë¥¼ ë“¤ì–´ì•¼ í•˜ë‚˜ìš”?", a: "ë„¤. ì–´ëŠ í•™ê³¼ë¥¼ ì„ íƒí•´ë„ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ 1í•™ë…„ êµì–‘í•„ìˆ˜ ê³¼ëª©ì„ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  41: { q: "ë‚˜ì¤‘ì— ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒí•˜ë ¤ëŠ” í•™ë¶€ì˜ 1í•™ë…„ ì „ê³µê¸°ì´ˆí•„ìˆ˜ ê³¼ëª©ë„ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "ì•„ë‹ˆìš”. 1í•™ë…„ í•„ìˆ˜ëŠ” ë©´ì œë˜ë‚˜ 2~4í•™ë…„ í•„ìˆ˜ëŠ” ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  42: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€í•™ë¶€ ì¡¸ì—…ì„ ìœ„í•´ í•„ìˆ˜ ì´ìˆ˜í•´ì•¼ í•˜ëŠ” í•™ì ì˜ êµ¬ì„±ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?", a: "1í•™ë…„ 36í•™ì , 1í•™ë…„ í•„ìˆ˜ í”„ë¡œì íŠ¸ 3í•™ì , ì£¼ì „ê³µ 48í•™ì , ë‹¤ì „ê³µ 36/24í•™ì , 4í•™ë…„ í•„ìˆ˜ 12í•™ì , ì‚¬íšŒë´‰ì‚¬ 1í•™ì , ì»¤ë¦¬ì–´ê°œë°œ2 1í•™ì , í•µì‹¬êµì–‘ 4í•™ì ì…ë‹ˆë‹¤." },
  43: { q: "ì£¼ì „ê³µì€ ìµœì†Œ ëª‡ í•™ì ì„ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "ì£¼ì „ê³µ ì¢…ë¥˜ì™€ ìƒê´€ì—†ì´ 48í•™ì  ì´ìƒ(400ë‹¨ìœ„ 6í•™ì  í¬í•¨)ì„ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  44: { q: "ê±´ì¶•í•™ë¶€ë¥¼ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒí•˜ë©´ ëª‡ í•™ì ì„ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "ì „ê³µê³¼ëª© 108í•™ì  ì´ìƒ(100~300ë‹¨ìœ„ 90í•™ì , 400ë‹¨ìœ„ 18í•™ì  í¬í•¨)ì„ ì·¨ë“í•´ì•¼ í•˜ë©°, ê±´ì¶•í•™ì¸ì¦ í•„ìˆ˜ ì„ ìˆ˜ê°•ê³¼ëª©ì„ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  45: { q: "ì¡¸ì—… ì‹œ í•™ìœ„ëŠ” ì–´ë–»ê²Œ í‘œê¸°ë˜ë‚˜ìš”?", a: "ì£¼ì „ê³µì„ ì„ íƒí•œ ë‹¨ê³¼ëŒ€í•™ê³¼(ë¶€)ì˜ ëª…ì¹­ìœ¼ë¡œ í•™ìœ„ê°€ ìˆ˜ì—¬ë˜ë©°, ë¶€ì „ê³µ/ë‹¤ì¤‘ì „ê³µì€ ì¡¸ì—…ì¦ëª…ì„œì— í•¨ê»˜ í‘œê¸°ë©ë‹ˆë‹¤." },
  46: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ìœµí•©íŠ¹í™”ì „ê³µ í”„ë¡œê·¸ë¨ êµìœ¡ê³¼ì •ì„ ë°˜ë“œì‹œ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "ë„¤. ë°˜ë“œì‹œ 1ê°œë¥¼ ì£¼ì „ê³µ ë˜ëŠ” ë‹¤ì „ê³µìœ¼ë¡œ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤." },
  47: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ìœµí•©íŠ¹í™”ì „ê³µ í”„ë¡œê·¸ë¨ ì¢…ë¥˜ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?", a: "ë¯¸ë˜ë°˜ë„ì²´ê³µí•™, ìœµí•©ì˜ê³¼í•™, ìœµí•©ì˜ê³µí•™, ì¸ì§€ìœµí•©ê³¼í•™, ë¯¸ë˜ì‚¬íšŒë””ìì¸, í˜ì‹ ê³µí•™ê²½ì˜ ì´ 6ê°€ì§€ì…ë‹ˆë‹¤." },
  48: { q: "ì£¼ì „ê³µ ë° ë‹¤ì „ê³µì„ ëª¨ë‘ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ìœµí•©íŠ¹í™”ì „ê³µ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì„ íƒí•´ë„ ë˜ë‚˜ìš”?", a: "ë„¤. ì£¼ì „ê³µ ë° ë‹¤ì „ê³µ ëª¨ë‘ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ìœµí•©íŠ¹í™”ì „ê³µ í”„ë¡œê·¸ë¨ì„ ì„ íƒí•´ë„ ë©ë‹ˆë‹¤." },
  49: { q: "'í”„ë¡œê·¸ë¨ ì „ê³µ'ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?", a: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€í•™ë¶€ í”„ë¡œê·¸ë¨ êµìœ¡ê³¼ì • ë° íƒ€ ë‹¨ê³¼ëŒ€í•™ í•™ë¶€ ì „ê³µí•µì‹¬Â·íŠ¹í™” êµìœ¡ê³¼ì •ì„ ë§í•©ë‹ˆë‹¤." },
  50: { q: "ì „ê³µ í•µì‹¬Â·íŠ¹í™” í”„ë¡œê·¸ë¨ì€ ë¬´ì—‡ì´ë©° ì–¸ì œë¶€í„° ì ìš©ë˜ë‚˜ìš”?", a: "ì „ê³µí•™ê³¼ì—ì„œ ì •í•œ í•µì‹¬ êµê³¼ëª©ë“¤ì„ ì¤‘ì‹¬ìœ¼ë¡œ 50í•™ì  ë‚´ì™¸ë¡œ êµ¬ì„±ëœ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. 2026í•™ë²ˆë¶€í„° ë‹¤ì „ê³µ ì„ íƒ ì‹œ ì ìš©ë©ë‹ˆë‹¤." },
  51: { q: "í”„ë¡œê·¸ë¨ ë‹¤ì¤‘ì „ê³µì€ ìµœì†Œ ëª‡ í•™ì ì„ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "400ë‹¨ìœ„ 6í•™ì ì„ í¬í•¨í•˜ì—¬ 36í•™ì  ì´ìƒì„ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  52: { q: "í”„ë¡œê·¸ë¨ ë¶€ì „ê³µì€ ìµœì†Œ ëª‡ í•™ì ì„ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "24í•™ì  ì´ìƒì„ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  53: { q: "ë§ˆì´í¬ë¡œì „ê³µìœ¼ë¡œ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ë¶€ì „ê³µì„ ëŒ€ì²´í•  ìˆ˜ ìˆë‚˜ìš”?", a: "ì•„ë‹ˆìš”. ë§ˆì´í¬ë¡œì „ê³µ(12í•™ì )ì€ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ë¶€ì „ê³µì„ ëŒ€ì²´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." },
  54: { q: "1í•™ë…„ í•„ìˆ˜ í”„ë¡œì íŠ¸ êµê³¼ëª©ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "Global Research Immersionìœ¼ë¡œ ì „ê³µí•µì‹¬ 3í•™ì ì´ë©°, ëª¨ë“  í•™ìƒì´ í•„ìˆ˜ ì´ìˆ˜í•´ì•¼ ì¡¸ì—… ê°€ëŠ¥í•©ë‹ˆë‹¤." },
  55: { q: "Global Research Immersionì€ ì–¸ì œ ì§„í–‰ë˜ë‚˜ìš”?", a: "1í•™ë…„ 2í•™ê¸° ê²¨ìš¸ë°©í•™ ë•Œ ì§„í–‰ë©ë‹ˆë‹¤." },
  56: { q: "4í•™ë…„ í”„ë¡œì íŠ¸ êµê³¼ëª©ì€ ëª‡ í•™ì ì´ë©°, ëˆ„ê°€ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "4í•™ë…„ 1í•™ê¸° 6í•™ì , 4í•™ë…„ 2í•™ê¸° 6í•™ì  ì´ 12í•™ì ì´ë©°, ëª¨ë“  í•™ìƒì´ í•„ìˆ˜ë¡œ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  57: { q: "í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ í”„ë¡œê·¸ë¨ì„ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒí•  ê²½ìš°, 2Â·3í•™ë…„ í”„ë¡œì íŠ¸ êµê³¼ëª©ì„ ì´ìˆ˜í•´ì•¼ í•˜ë‚˜ìš”?", a: "ë„¤. 2Â·3í•™ë…„ í”„ë¡œì íŠ¸ êµê³¼ëª©(ê°ê° 3í•™ì ì”©)ì„ í•„ìˆ˜ë¡œ ì´ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤." },
  58: { q: "í”„ë¡œì íŠ¸ êµê³¼ëª©ì´ ì „ê³µí•™ì ìœ¼ë¡œ ì¸ì •ë˜ë‚˜ìš”?", a: "2Â·3í•™ë…„ í”„ë¡œì íŠ¸ëŠ” ì „ê³µí•™ì  ì¸ì •, 1í•™ë…„ê³¼ 4í•™ë…„ í”„ë¡œì íŠ¸ëŠ” ì¡¸ì—… í•„ìˆ˜ì´ë‚˜ ì „ê³µí•™ì  ë¯¸í¬í•¨ì…ë‹ˆë‹¤." },
  59: { q: "íƒ€ ë‹¨ê³¼ëŒ€í•™ì„ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒí•œ í•™ìƒì´ 2Â·3í•™ë…„ í”„ë¡œì íŠ¸ êµê³¼ëª©ì„ ë“¤ì„ ìˆ˜ ìˆë‚˜ìš”?", a: "ë„¤, ë‹¤ì „ê³µìœ¼ë¡œ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ í”„ë¡œê·¸ë¨ì„ ì´ìˆ˜í•˜ë©´ ìˆ˜ê°•ì‹ ì²­í•˜ì—¬ ë‹¤ì „ê³µ í•™ì ì„ ì·¨ë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  60: { q: "ì±Œë¦°ì§€ì¥í•™ê¸ˆì˜ 1í•™ë…„ 2í•™ê¸° ì§€ê¸‰ ëŒ€ìƒì ì„ ì • ê¸°ì¤€ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "1í•™ë…„ 1í•™ê¸° ì¥í•™í‰ì ì´ 3.75 ì´ìƒì´ì–´ì•¼ ì§€ê¸‰ëŒ€ìƒì ì„ ì •ë©ë‹ˆë‹¤. (ì‹œí–‰ ì„¸ë¶€ ì¡°ê±´ì€ ê³µì§€ ì°¸ì¡°)" },
  61: { q: "í”„ë¡œì íŠ¸ ì¥í•™ê¸ˆì€ ì–´ë–¤ í•™ìƒì—ê²Œ ì§€ê¸‰ë˜ë‚˜ìš”?", a: "6ê°œì˜ ìœµí•©íŠ¹í™”ì „ê³µ í”„ë¡œê·¸ë¨ì„ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒí•˜ê³  2, 3í•™ë…„ í”„ë¡œì íŠ¸ êµê³¼ëª©ì„ ì´ìˆ˜í•œ í•™ìƒì…ë‹ˆë‹¤." },
  62: { q: "ì±Œë¦°ì§€ì¥í•™ê¸ˆê³¼ í”„ë¡œì íŠ¸ ì¥í•™ê¸ˆ ì´ì¤‘ ì§€ê¸‰ì´ ê°€ëŠ¥í•œê°€ìš”?", a: "ë„¤, ì´ì¤‘ ìˆ˜í˜œ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¨, 2í•™ë…„ ì§„ê¸‰ ì‹œ í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€í•™ë¶€ ë‚´ í”„ë¡œê·¸ë¨ì„ ì£¼ì „ê³µìœ¼ë¡œ ì„ íƒí•œ í•™ìƒë§Œ ëŒ€ìƒì…ë‹ˆë‹¤." },
  63: { q: "íƒ€ ë‹¨ê³¼ëŒ€í•™ ì£¼ì „ê³µ ì„ íƒ ì‹œ í”„ë¡œì íŠ¸ ì¥í•™ê¸ˆì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?", a: "ì•„ë‹ˆìš”. íƒ€ ë‹¨ê³¼ëŒ€í•™ ì£¼ì „ê³µ í•™ìƒì€ í”„ë¡œì íŠ¸ ì¥í•™ê¸ˆ ì§€ê¸‰ ëŒ€ìƒ ì œì™¸ì…ë‹ˆë‹¤." },
  64: { q: "ì™¸ë¶€ì¥í•™ì¬ë‹¨ ì¥í•™ê¸ˆ ì‹ ì²­ì„ ìœ„í•´ ì„±ì í‘œê°€ í•„ìš”í•˜ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?", a: "intercollege@hanyang.ac.krë¡œ ë©”ì¼ì„ ë³´ë‚´ë©´ ê³µë¬¸ì„ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  65: { q: "SPARK í”„ë¡œê·¸ë¨ì´ ë¬´ì—‡ì¸ê°€ìš”?", a: "Speaking Proficiency and Academic Real-world Knowledge(SPARK)ë¡œ 1í•™ë…„ ëŒ€ìƒ ë¬´ë£Œ ì˜ì–´ëŠ¥ë ¥ í–¥ìƒ ì§‘ì¤‘ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤." },
  66: { q: "SPARK í”„ë¡œê·¸ë¨ì˜ ìˆ˜ì—… ì§„í–‰ ìš”ì¼ê³¼ ì‹œê°„ì€ ì–¸ì œì¸ê°€ìš”?", a: "ë§¤ì£¼ í™”ìš”ì¼, ëª©ìš”ì¼ ì˜¤í›„ 5ì‹œ~8ì‹œ ì§„í–‰ë©ë‹ˆë‹¤." },
  67: { q: "SPARK í”„ë¡œê·¸ë¨ì€ ì–¸ì œë¶€í„° ì–¸ì œê¹Œì§€ ì§„í–‰ë˜ë‚˜ìš”?", a: "2026ë…„ 3ì›”~12ì›”(1í•™ë…„ 1í•™ê¸°, ì—¬ë¦„ë°©í•™, 2í•™ê¸°) ì•½ 9ê°œì›”ê°„ ì§„í–‰ë©ë‹ˆë‹¤." },
  68: { q: "SPARK í”„ë¡œê·¸ë¨ ì´ìˆ˜ ì‹œ í•™ì  ì¸ì •ì´ ê°€ëŠ¥í•œê°€ìš”?", a: "í•™ê¸°ë³„ ì´ìˆ˜ì ì¤‘ í¬ë§ìì— í•œí•´ 20í•™ì  ë²”ìœ„ ë‚´ì—ì„œ í•™ì  ì¸ì • ê°€ëŠ¥í•©ë‹ˆë‹¤. (1í•™ë…„ 1í•™ê¸°: 1í•™ì , ì—¬ë¦„~2í•™ê¸°: 2í•™ì )" },
  69: { q: "SPARK í”„ë¡œê·¸ë¨ í•™ì  ì‹ ì²­ì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°ëŠ” ì–¸ì œì¸ê°€ìš”?", a: "ê³µí†µêµìœ¡ê³¼ì • 18í•™ì  ì™¸ì— ë‹¤ë¥¸ ê³¼ëª©ìœ¼ë¡œ ì´ë¯¸ 20í•™ì ì„ ì±„ìš´ ê²½ìš° ì‹ ì²­ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤." },
  70: { q: "2026 BootcampëŠ” í•„ìˆ˜ë¡œ ì°¸ì„í•´ì•¼ í•˜ë‚˜ìš”?", a: "ë„¤, í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€í•™ë¶€ ì‹ ì…ìƒì´ë¼ë©´ í•„ìˆ˜ë¡œ ì°¸ì„í•´ì•¼ í•©ë‹ˆë‹¤." },
  71: { q: "BootcampëŠ” ì–¸ì œ ì§„í–‰ë˜ë‚˜ìš”?", a: "ìˆ˜ì‹œ í•©ê²©ìƒ: 2026ë…„ 2ì›” 9ì¼(ì›”)~13ì¼(ê¸ˆ) ì´ 5ì¼ê°„. ì •ì‹œ í•©ê²©ìƒ: ì¶”í›„ ê³µì§€ ì˜ˆì •ì…ë‹ˆë‹¤." },
  72: { q: "Bootcampì—ì„œëŠ” ë¬´ì—‡ì„ ë°°ìš°ê²Œ ë˜ë‚˜ìš”?", a: "ë‹¤ì–‘í•œ í•™ë¬¸ì  ê´€ì ê³¼ ê¸°ìˆ ì„ ìœµí•©í•˜ì—¬ ë³µì¡í•œ ë¬¸ì œë¥¼ ë‹¤ë£¨ëŠ” ë¶„ì„ì , ì•Œê³ ë¦¬ì¦˜ì  ì‚¬ê³ ì²´ê³„ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤." },
  73: { q: "Bootcamp ì°¸ì—¬ë¥¼ ìœ„í•œ í•„ìˆ˜ ì¤€ë¹„ë¬¼ì´ ìˆë‚˜ìš”?", a: "1í•™ë…„ êµìœ¡ê³¼ì •ì„ ìœ„í•´ ë…¸íŠ¸ë¶ì´ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤." },
  74: { q: "ì§€ë°©ì— ì‚¬ëŠ” í•™ìƒì¸ë° Bootcamp ê¸°ê°„ ë™ì•ˆ ê¸°ìˆ™ì‚¬ê°€ ì œê³µë˜ë‚˜ìš”?", a: "ë„¤, Bootcamp ê¸°ê°„ ë™ì•ˆ ê¸°ìˆ™ì‚¬ê°€ ì œê³µë˜ë©°, ì£¼ì†Œì§€ ì›ê±°ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì„ ë°œë©ë‹ˆë‹¤." },
  75: { q: "ëª¨ì˜í† í”Œ ì‹œí—˜ì€ ë°˜ë“œì‹œ ì‘ì‹œí•´ì•¼ í•˜ë‚˜ìš”?", a: "ë„¤, í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ ì‹ ì…ìƒì€ Bootcampì™€ ë”ë¶ˆì–´ ëª¨ì˜í† í”Œë„ ë°˜ë“œì‹œ ì‘ì‹œí•´ì•¼ í•©ë‹ˆë‹¤." },
};

const keywords = [
  { text: "ì˜ì–´ ìˆ˜ì—…", icon: "ğŸŒ" },
  { text: "ì£¼ì „ê³µ ì„ íƒ", icon: "ğŸ¯" },
  { text: "ì¡¸ì—…í•™ì ", icon: "ğŸ“Š" },
  { text: "Bootcamp", icon: "âš¡" },
  { text: "SPARK", icon: "ğŸ’¬" },
  { text: "ì¥í•™ê¸ˆ", icon: "ğŸ’°" },
  { text: "í”„ë¡œì íŠ¸", icon: "ğŸ—ï¸" },
  { text: "ë‹¤ì „ê³µ", icon: "ğŸ”€" },
  { text: "ì„±ì ", icon: "ğŸ“ˆ" },
  { text: "ìˆ˜ê°•ì‹ ì²­", icon: "ğŸ“‹" },
];

// =============================
// Pure search (exported for tests)
// =============================
export const searchFAQPure = (faqObj, query) => {
  const lowerQuery = String(query || "").toLowerCase();
  const results = [];
  for (let id in faqObj) {
    const { q, a } = faqObj[id];
    const ql = q.toLowerCase();
    const al = a.toLowerCase();
    const score = (ql.startsWith(lowerQuery) ? 3 : 0) + (ql.includes(lowerQuery) ? 2 : 0) + (al.includes(lowerQuery) ? 1 : 0);
    if (score > 0) results.push({ id: Number(id), q, a, score });
  }
  return results.sort((a, b) => (b.score - a.score) || a.id - b.id);
};

// Lightweight self-tests (do not run automatically)
export const __tests = {
  cases: [
    { name: "Bootcamp keyword should return results", fn: () => searchFAQPure(faqData, "Bootcamp").length > 0 },
    { name: "ì˜ì–´ keyword should match curriculum in Korean", fn: () => searchFAQPure(faqData, "ì˜ì–´").length > 0 },
    { name: "Unknown term should return empty array", fn: () => searchFAQPure(faqData, "nonexistentxyz").length === 0 },
  ],
  run() { return this.cases.map(c => ({ name: c.name, passed: !!c.fn() })); },
};

/**
 * HanyangFAQChatbot â€“ Navy Elegant Redesign (FIXED)
 * - Fix: balanced JSX tags (added missing </div> before </aside>)
 * - Remove stray TS annotations in JS env
 * - Theme: #2e3d86 primary, unified focus/hover states
 */

const HanyangFAQChatbot = () => {
  const [messages, setMessages] = useState([
    {
      type: "bot",
      text:
        "ì•ˆë…•í•˜ì„¸ìš”! í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€ì— ì…í•™í•˜ì‹  ê²ƒì„ ì¶•í•˜í•©ë‹ˆë‹¤.\n\nì´ê³³ì€ ì‹ ì…ìƒ ì—¬ëŸ¬ë¶„ì˜ ëª¨ë“  ê¶ê¸ˆì¦ì„ í•´ê²°í•˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤. í¸í•˜ê²Œ ì§ˆë¬¸í•´ì£¼ì„¸ìš”. ğŸ˜Š",
    },
  ]);
  const [input, setInput] = useState("");
  const [openSections, setOpenSections] = useState({});
  const messagesEndRef = useRef(null);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const searchFAQ = (query) => searchFAQPure(faqData, query);
  const addBotMessage = (text) => setMessages((prev) => [...prev, { type: "bot", text }]);

  const handleSearch = () => {
    if (input.trim() === "") return;
    setMessages((prev) => [...prev, { type: "user", text: input }]);
    const results = searchFAQ(input);

    if (results.length > 0) {
      const responseText = results
        .map((item, idx) => `Q${idx + 1}. ${item.q}\nâ†’ ${item.a}`)
        .join("\n\n");
      addBotMessage(responseText);
    } else {
      addBotMessage("ì£„ì†¡í•©ë‹ˆë‹¤. ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ì‹œë„í•´ì£¼ì„¸ìš”.");
    }
    setInput("");
  };

  const handleCategorySelect = (category) => {
    const faqIds = categories[category].ids;
    const faqs = faqIds.map((id) => faqData[id]);

    const categoryResponse = faqs
      .map((faq, idx) => `Q${idx + 1}. ${faq.q}\nâ†’ ${faq.a}`)
      .join("\n\n");

    addBotMessage(`${categories[category].icon} ${category}\n\n${categoryResponse}`);
  };

  const handleKeywordClick = (keyword) => {
    setMessages((prev) => [...prev, { type: "user", text: keyword }]);
    const results = searchFAQ(keyword);

    if (results.length > 0) {
      const responseText = results
        .map((item, idx) => `Q${idx + 1}. ${item.q}\nâ†’ ${item.a}`)
        .join("\n\n");
      addBotMessage(responseText);
    } else {
      addBotMessage("ì£„ì†¡í•©ë‹ˆë‹¤. ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ì‹œë„í•´ì£¼ì„¸ìš”.");
    }
  };

  const toggleSection = (key) => setOpenSections((prev) => ({ ...prev, [key]: !prev[key] }));

  return (
    <div className="flex h-screen bg-[linear-gradient(135deg,#121835_0%,#1a2360_45%,#202a78_100%)] text-slate-100">
      {/* Sidebar */}
      <aside className="w-80 shrink-0 h-full border-r border-white/10 bg-white/5 backdrop-blur-xl overflow-y-auto">
        {/* Brand */}
        <div className="sticky top-0 z-10 bg-white/10 backdrop-blur-xl border-b border-white/10">
          <div className="px-6 py-5">
            <div className="flex items-center gap-3">
              <div className="h-10 w-10 rounded-2xl bg-white/95 flex items-center justify-center shadow-sm overflow-hidden">
                <SafeImg
                  sources={ICON_SOURCES}
                  alt="Hanyang Intercollege Icon"
                  className="h-10 w-10 object-contain"
                />
              </div>
              <div>
                <SafeImg
                  sources={LOGO_SOURCES}
                  alt="Hanyang Intercollege Logo"
                  className="h-5 object-contain"
                />
                <p className="text-xs/5 text-slate-200">Hanyang Intercollege</p>
              </div>
            </div>
          </div>
        </div>

        {/* Categories */}
        <div className="p-4">
          <h3 className="px-2 text-[11px] font-semibold text-slate-200/90 uppercase tracking-[0.12em]">ì¹´í…Œê³ ë¦¬</h3>
          <div className="mt-3 space-y-2">
            {Object.entries(categories).map(([cat, data]) => {
              const open = !!openSections[cat];
              return (
                <div key={cat} className="rounded-xl border border-white/10 bg-white/5 overflow-hidden">
                  <button
                    onClick={() => toggleSection(cat)}
                    className="w-full flex items-center justify-between px-4 py-3 text-left hover:bg-white/10 transition"
                    aria-expanded={open}
                  >
                    <span className="flex items-center gap-2 text-sm font-medium text-slate-100">
                      <span className="text-base">{data.icon}</span>
                      {cat}
                    </span>
                    {open ? (
                      <ChevronDown className="h-4 w-4 text-slate-300" />
                    ) : (
                      <ChevronRight className="h-4 w-4 text-slate-300" />
                    )}
                  </button>
                  {open && (
                    <div className="px-3 pb-3">
                      <button
                        onClick={() => handleCategorySelect(cat)}
                        className="w-full mt-2 text-left text-[13px] rounded-lg bg-white/10 border border-white/10 px-3 py-2 hover:bg-white/20 transition"
                      >
                        ì „ì²´ ë³´ê¸° <span className="ml-2 text-slate-300">({data.ids.length})</span>
                      </button>
                    </div>
                  )}
                </div>
              );
            })}
          </div>

          {/* Popular */}
          <h3 className="mt-6 px-2 text-[11px] font-semibold text-slate-200/90 uppercase tracking-[0.12em]">ì¸ê¸° ê²€ìƒ‰</h3>
          <div className="mt-3 flex flex-wrap gap-2">
            {keywords.map((kw, idx) => (
              <button
                key={idx}
                onClick={() => handleKeywordClick(kw.text)}
                className="px-3 py-1.5 rounded-full border border-white/10 bg-white/10 hover:bg-white/20 text-xs font-medium text-slate-100 transition"
              >
                <span className="mr-1">{kw.icon}</span>
                {kw.text}
              </button>
            ))}
          </div>
        </div>

        {/* Footer badge + contact */}
        <div className="mt-auto p-4">
          <div className="rounded-xl border border-white/10 bg-white/5 p-4 text-xs text-slate-300">
            <div className="flex items-center gap-2 font-medium text-slate-100">
              <Sparkles className="h-4 w-4" />
              ë¹ ë¥¸ íŒ
            </div>
            <p className="mt-2 leading-relaxed">í‚¤ì›Œë“œë¥¼ ëˆŒëŸ¬ ë°”ë¡œ ê²€ìƒ‰í•˜ê±°ë‚˜, ì¢Œì¸¡ ì¹´í…Œê³ ë¦¬ë¥¼ í¼ì³ì„œ ì „ì²´ FAQë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.</p>
          </div>
          <div className="mt-3 p-4 border-t border-white/10 text-xs text-slate-300 text-center">
            ê¸°íƒ€ ë¬¸ì˜ì‚¬í•­ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” {" "}
            <a href="mailto:intercollege@hanyang.ac.kr" className="text-white font-semibold hover:underline">
              intercollege@hanyang.ac.kr
            </a>{" "}
            ë¡œ ë¬¸ì˜ ë‚¨ê²¨ì£¼ì„¸ìš”.
          </div>
        </div>
      </aside>

      {/* Main */}
      <main className="flex-1 flex flex-col">
        {/* Header */}
        <div className="border-b border-white/10 bg-white/5 backdrop-blur-xl">
          <div className="px-8 py-6">
            <h2 className="text-2xl md:text-3xl font-bold tracking-tight">í•œì–‘ì¸í„°ì¹¼ë¦¬ì§€, ê¶ê¸ˆí•˜ëƒ¥?</h2>
            <p className="text-sm md:text-base text-slate-200/90 mt-1">ê¶ê¸ˆí•˜ì‹  ëª¨ë“  ì‚¬í•­ì„ í¸í•˜ê²Œ ë¬¼ì–´ë³´ì„¸ìš”!</p>

            {/* Search bar */}
            <div className="mt-5 flex gap-3">
              <div className="relative flex-1">
                <Search className="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-300" />
                <input
                  type="text"
                  value={input}
                  onChange={(e) => setInput(e.target.value)}
                  onKeyDown={(e) => e.key === "Enter" && handleSearch()}
                  placeholder="ex) ì£¼ì „ê³µ ì„ íƒ ìš”ê±´, Bootcamp ì¼ì •, SPARK í•™ì  ì¸ì •"
                  aria-label="FAQ ê²€ìƒ‰"
                  className="w-full pl-11 pr-4 py-3.5 rounded-2xl bg-white/90 text-slate-900 placeholder-slate-400 border border-slate-200 focus:outline-none focus:ring-4 focus:ring-[#2e3d86]/30 focus:border-[#2e3d86] shadow-sm"
                />
              </div>
              <button
                onClick={handleSearch}
                className="inline-flex items-center gap-2 rounded-2xl px-5 py-3.5 font-semibold border border-white/10 text-white hover:shadow-md active:scale-[0.99] transition"
                style={{ backgroundColor: BRAND }}
                onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = BRAND_HOVER)}
                onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = BRAND)}
                aria-label="ê²€ìƒ‰"
              >
                <Send className="h-5 w-5" />
                ê²€ìƒ‰
              </button>
            </div>
          </div>
        </div>

        {/* Messages */}
        <div className="flex-1 overflow-y-auto px-6 sm:px-8 py-8 space-y-5">
          {messages.map((msg, idx) => (
            <div key={idx} className={`flex ${msg.type === "user" ? "justify-end" : "justify-start"}`}>
              <div
                className={`max-w-2xl px-5 py-4 rounded-2xl shadow-sm backdrop-blur-sm whitespace-pre-wrap leading-relaxed text-sm md:text-[15px] ${
                  msg.type === "user"
                    ? "bg-white text-[#0b1b3a] rounded-br-sm border border-white/40"
                    : "bg-white/10 text-slate-100 rounded-bl-sm border border-white/10"
                }`}
              >
                {msg.text}
              </div>
            </div>
          ))}
          <div ref={messagesEndRef} />
        </div>

        {/* Input (sticky for mobile as well) */}
        <div className="border-t border-white/10 bg-white/5 backdrop-blur-xl px-6 sm:px-8 py-5">
          <div className="flex gap-3">
            <div className="relative flex-1">
              <Search className="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-300" />
              <input
                type="text"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyDown={(e) => e.key === "Enter" && handleSearch()}
                placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..."
                aria-label="ì§ˆë¬¸ ì…ë ¥"
                className="w-full pl-11 pr-4 py-3.5 rounded-2xl bg-white/90 text-slate-900 placeholder-slate-400 border border-slate-200 focus:outline-none focus:ring-4 focus:ring-[#2e3d86]/30 focus:border-[#2e3d86] shadow-sm"
              />
            </div>
            <button
              onClick={handleSearch}
              className="inline-flex items-center gap-2 rounded-2xl px-6 py-3.5 font-semibold border border-white/10 text-white hover:shadow-md active:scale-[0.99] transition"
              style={{ backgroundColor: BRAND }}
              onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = BRAND_HOVER)}
              onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = BRAND)}
            >
              <Send className="h-5 w-5" />
              ì „ì†¡
            </button>
          </div>
        </div>
      </main>
    </div>
  );
};

export default HanyangFAQChatbot;
